{"version":3,"sources":["app/components/App.jsx","app/components/custom/index.js","app/initialize.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnTA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AAAA","file":"public/app.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _draftJs = require('draft-js');\n\nvar _custom = require('./custom');\n\nvar _custom2 = _interopRequireDefault(_custom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar App = function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    _classCallCheck(this, App);\n\n    var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\n    var decorator = new _draftJs.CompositeDecorator([{\n      strategy: findLinkEntities,\n      component: Link\n    }]);\n\n    _this.state = {\n      editor: false,\n      editorState: _draftJs.EditorState.createEmpty(decorator)\n    };\n    _this.onChange = _this._onChange.bind(_this);\n    _this.onBoldClick = _this._onBoldClick.bind(_this);\n\n    _this.onAddLink = _this._addLink.bind(_this);\n    _this.removeLink = _this._removeLink.bind(_this);\n\n    //custom block style\n    _this.myBlockRendererFn = _this._myBlockRendererFn.bind(_this);\n\n    //image\n    _this.confirmImage = _this._confirmImage.bind(_this);\n\n    _this.logState = _this._logState.bind(_this);\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: '_onBoldClick',\n    value: function _onBoldClick() {\n      var _this2 = this;\n\n      this.onChange(_draftJs.RichUtils.toggleInlineStyle(this.state.editorState, 'BOLD'));\n      setTimeout(function () {\n        return _this2.refs.editor.focus();\n      }, 0);\n    }\n  }, {\n    key: '_onChange',\n    value: function _onChange(editorState) {\n      this.setState({ editorState: editorState });\n    }\n  }, {\n    key: '_addLink',\n    value: function _addLink() {\n      var _this3 = this;\n\n      var editorState = this.state.editorState;\n\n      var contentState = editorState.getCurrentContent();\n      var contentSelection = editorState.getSelection();\n\n      var start = contentSelection.getStartOffset();\n      var end = contentSelection.getEndOffset();\n\n      var anchorKey = contentSelection.getAnchorKey();\n      var currentContentBlock = contentState.getBlockForKey(anchorKey);\n      var selectedText = currentContentBlock.getText().slice(start, end);\n\n      console.log('contentState -> ', contentState);\n      console.log('getSelection -> ', this.state.editorState.getSelection().getEndOffset());\n      console.log('selectedText -> ', selectedText);\n\n      var contentStateWithEntity = contentState.createEntity('LINK', 'MUTABLE', { href: 'http://www.betotally.com' });\n      var entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n      var newEditorState = _draftJs.EditorState.set(editorState, { currentContent: contentStateWithEntity });\n\n      this.setState({\n        editorState: _draftJs.RichUtils.toggleLink(newEditorState, newEditorState.getSelection(), entityKey)\n      });\n\n      setTimeout(function () {\n        _this3.logState();\n        _this3.refs.editor.focus();\n      }, 0);\n    }\n  }, {\n    key: '_removeLink',\n    value: function _removeLink(e) {\n      e.preventDefault();\n      var editorState = this.state.editorState;\n\n      var selection = editorState.getSelection();\n      if (!selection.isCollapsed()) {\n        this.setState({\n          editorState: _draftJs.RichUtils.toggleLink(editorState, selection, null)\n        });\n      }\n    }\n  }, {\n    key: '_logState',\n    value: function _logState() {\n      var content = this.state.editorState.getCurrentContent();\n      console.log((0, _draftJs.convertToRaw)(content));\n    }\n  }, {\n    key: '_confirmImage',\n    value: function _confirmImage(e) {\n      var _this4 = this;\n\n      e.preventDefault();\n      var _state = this.state,\n          editorState = _state.editorState,\n          urlValue = _state.urlValue,\n          urlType = _state.urlType;\n\n      var contentState = editorState.getCurrentContent();\n      var contentStateWithEntity = contentState.createEntity('image', 'IMMUTABLE', { src: 'http://res.cloudinary.com/betotally/image/upload/v1486889904/t4qfq4euk8t2vqbbpry2.jpg' });\n      var entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n      var newEditorState = _draftJs.EditorState.set(editorState, { currentContent: contentStateWithEntity });\n\n      this.setState({\n        editorState: _draftJs.AtomicBlockUtils.insertAtomicBlock(newEditorState, entityKey, ' '),\n        showURLInput: false,\n        urlValue: ''\n      }, function () {\n        setTimeout(function () {\n          return _this4.refs.editor.focus();\n        }, 0);\n      });\n    }\n  }, {\n    key: '_myBlockRendererFn',\n    value: function _myBlockRendererFn(contentBlock) {\n      var type = contentBlock.getType();\n      if (type === 'atomic') {\n        return {\n          component: _custom2.default,\n          editable: true,\n          props: {\n            foo: 'bar'\n          }\n        };\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.setState({ editor: true });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        { id: 'content' },\n        _react2.default.createElement(\n          'h5',\n          null,\n          'Time to ',\n          _react2.default.createElement(\n            'a',\n            { href: 'https://facebook.github.io/react/' },\n            'React'\n          ),\n          '.'\n        ),\n        _react2.default.createElement(\n          'button',\n          { onClick: this.onBoldClick },\n          'BOLD'\n        ),\n        _react2.default.createElement(\n          'button',\n          { onClick: this.onAddLink },\n          'LINK'\n        ),\n        _react2.default.createElement(\n          'button',\n          { onClick: this.removeLink },\n          'REMOVE LINK'\n        ),\n        _react2.default.createElement(\n          'button',\n          { onClick: this.confirmImage },\n          'Image'\n        ),\n        this.state.editor && _react2.default.createElement(_draftJs.Editor, {\n          editorState: this.state.editorState,\n          blockRendererFn: mediaBlockRenderer,\n          onChange: this.onChange,\n          ref: 'editor'\n        })\n      );\n    }\n  }]);\n\n  return App;\n}(_react2.default.Component);\n\nexports.default = App;\n\n\nfunction findLinkEntities(contentBlock, callback, contentState) {\n  contentBlock.findEntityRanges(function (character) {\n    var entityKey = character.getEntity();\n    return entityKey !== null && contentState.getEntity(entityKey).getType() === 'LINK';\n  }, callback);\n}\n\nfunction mediaBlockRenderer(block) {\n  if (block.getType() === 'atomic') {\n    return {\n      component: Media,\n      editable: false\n    };\n  }\n\n  return null;\n}\n\nvar Link = function Link(props) {\n  var _props$contentState$g = props.contentState.getEntity(props.entityKey).getData(),\n      url = _props$contentState$g.url;\n\n  return _react2.default.createElement(\n    'a',\n    { href: url, style: styles.link },\n    props.children\n  );\n};\n\nvar Image = function Image(props) {\n  return _react2.default.createElement('img', { src: props.src, style: styles.media, width: '200', height: '200' });\n};\n\nvar Media = function Media(props) {\n  var entity = props.contentState.getEntity(props.block.getEntityAt(0));\n\n  var _entity$getData = entity.getData(),\n      src = _entity$getData.src;\n\n  var type = entity.getType();\n\n  var media = void 0;\n  if (type === 'image') {\n    media = _react2.default.createElement(Image, { src: src });\n  }\n\n  return media;\n};\n\nvar styles = {\n  root: {\n    fontFamily: '\\'Georgia\\', serif',\n    padding: 20,\n    width: 600\n  },\n  buttons: {\n    marginBottom: 10\n  },\n  urlInputContainer: {\n    marginBottom: 10\n  },\n  urlInput: {\n    fontFamily: '\\'Georgia\\', serif',\n    marginRight: 10,\n    padding: 3\n  },\n  editor: {\n    border: '1px solid #ccc',\n    cursor: 'text',\n    minHeight: 80,\n    padding: 10\n  },\n  button: {\n    marginTop: 10,\n    textAlign: 'center'\n  },\n  link: {\n    color: '#3b5998',\n    textDecoration: 'underline',\n    fontSize: 14\n  }\n};\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MediaComponent = function (_React$Component) {\n  _inherits(MediaComponent, _React$Component);\n\n  function MediaComponent() {\n    _classCallCheck(this, MediaComponent);\n\n    return _possibleConstructorReturn(this, (MediaComponent.__proto__ || Object.getPrototypeOf(MediaComponent)).apply(this, arguments));\n  }\n\n  _createClass(MediaComponent, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          block = _props.block,\n          contentState = _props.contentState;\n      var foo = this.props.blockProps.foo;\n\n      var data = contentState.getEntity(block.getEntityAt(0)).getData();\n      return _react2.default.createElement(\n        'figure',\n        null,\n        ' or some other content using this data.'\n      );\n    }\n  }]);\n\n  return MediaComponent;\n}(_react2.default.Component);\n","'use strict';\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _App = require('components/App');\n\nvar _App2 = _interopRequireDefault(_App);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  _reactDom2.default.render(_react2.default.createElement(_App2.default, null), document.querySelector('#app'));\n});\n"]}